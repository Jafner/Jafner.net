version: '3'

services:
  vanilla:
    image: itzg/minecraft-server
    container_name: vanilla
    environment:
      - EULA=TRUE
    volumes:
      - ./vanilla:/data:rw
    networks:
      - mc-router
    depends_on:
      - router
    labels:
      - traefik.enable=false
  enigmatica2:
    image: acearcher/mc-enigmatica2-server:latest
    container_name: enigmatica2
    environment:
      - MAX_RAM=8G
    volumes:
      - ./data:/home/minecraft/enigmatica2:rw
    networks:
      - mc-router
    depends_on:
      - router
    labels:
      - traefik.enable=false
  enigmatica6:
    image: itzg/minecraft-server
    container_name: enigmatica6
    environment:
      - EULA=TRUE
      - TYPE=CURSEFORGE
      - CF_SERVER_MOD=/modpacks/Enigmatica6Server-0.4.1.zip
      - MAX_MEMORY=6G
#      - USE_MODPACK_START_SCRIPT=false
      - ENABLE_RCON=true
    networks:
      - mc-router
    depends_on:
      - router
    volumes:
      - ./enigmatica6:/data
      - ./modpacks:/modpacks:ro
    labels:
      - traefik.enable=false
  router:
    image: itzg/mc-router
    container_name: mc-router
    networks:
      - mc-router
    ports:
      - 25565:25565
    command: --mapping=mc-vanilla.jafner.net=vanilla:25565,mc-enigmatica2.jafner.net=enigmatica2:25565,mc-enigmatica6.jafner.net=enigmatica6:25565
    labels:
      - traefik.enable=false

networks:
  mc-router:
