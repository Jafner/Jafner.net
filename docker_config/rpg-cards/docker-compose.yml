version: "3"
services:
  rpg-cards-node:
    container_name: rpg-cards_node
    image: node:alpine
    restart: unless-stopped
    user: "node"
    working_dir: /home/node/app
    environment:
      - NODE_ENV=production
    volumes:
      - ${DOCKER_DATA}:/home/node/app
    command: "npm start"
  rpg-cards-web:
    container_name: rpg-cards_web
    image: httpd
    unless-stopped
    networks:
      - web
    volumes:
      - "${DOCKER_DATA}/generator:/usr/local/apache2/htdocs"
    labels:
      - traefik.http.routers.rpg-cards.rule=Host(`rpg-cards.jafner.net`)
      - traefik.http.routers.rpg-cards.tls.certresolver=lets-encrypt
networks:
  web:
    external: true
