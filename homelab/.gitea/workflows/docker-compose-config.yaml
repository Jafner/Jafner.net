name: Docker Compose Config
run-name: ${{ gitea.actor }} is linting docker-compose files
on: [push]

jobs:
  docker-compose-config:
    runs-on: docker:25-dind
    steps:
      - name: Checkout
        uses: actions/checkout@v3
      - name: Get location of all docker-compose.yaml files
        run: |
          for compose in $(find "$PWD"/ -name docker-compose.yml); do 
            cd $(dirname $compose)
            docker compose config
          done
      - run: echo "Job status ${{ job.status }}"