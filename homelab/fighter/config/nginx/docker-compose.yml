version: '3.9'
services:
  nginx:
    image: nginx@sha256:41b0e86104ba681811bf60b4d6970ed24dd59e282b36c352b8a55823bbb5e14a
    container_name: nginx_test
    networks:
      - web
    labels:
      - traefik.http.routers.nginx.rule=Host(`test.jafner.net`)
      - traefik.http.routers.nginx.tls.certresolver=lets-encrypt
      - traefik.http.routers.nginx.middlewares=traefik-forward-auth-privileged@file

networks:
  web:
    external: true
