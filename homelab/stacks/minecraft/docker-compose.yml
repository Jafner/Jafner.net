services:
  router:
    image: itzg/mc-router:latest
    container_name: minecraft_router
    restart: "no"
    networks:
      - minecraft
    ports:
      - 25565:25565
    environment:
      DEFAULT: server:25565
  server:
    image: itzg/minecraft-server:java17
    container_name: minecraft_server
    networks:
      - minecraft
    environment: 
      EULA: "TRUE"
      TYPE: "FORGE"
      VERSION: "1.20.1"
      FORGE_VERSION: "47.3.1"
      MEMORY: 16G
      USE_AIKAR_FLAGS: true
      DIFFICULTY: hard
      ALLOW_FLIGHT: true
      LEVEL: world
    volumes:
      - $APPDATA/tnp7:/data

networks:
  minecraft: