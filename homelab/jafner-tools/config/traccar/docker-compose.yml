version: '3.1'
services:
  traccar:
    image: traccar/traccar
    container_name: traccar_traccar
    restart: "no"
    ports:
      - 5000-5170:5000-5170/tcp
      - 5000-5170:5000-5170/udp
    volumes:
      - ${DOCKER_DATA}/logs:/opt/traccar/logs:rw
      - ${DOCKER_DATA}/data:/opt/traccar/data:rw
      - ./traccar.xml:/opt/traccar/conf/traccar.xml:ro
    labels:
      - traefik.http.routers.traccar.rule=Host(`traccar.jafner.tools`)
      - traefik.http.routers.traccar.tls.certresolver=lets-encrypt
      - traefik.http.services.traccar.loadbalancer.server.port=8082
    networks:
      - web
networks:
  web:
    external: true
