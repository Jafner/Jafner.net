version: "3"
services:
  sftp:
    image: atmoz/sftp
    container_name: sftp_sftp
    logging:
      driver: loki
      options:
        loki-url: http://localhost:3100/loki/api/v1/push
        loki-batch-size: "50"
        loki-retries: "1"
        loki-timeout: "2s"
    restart: "no"
    ports:
      - 23450:22/tcp
    volumes:
      - ${DOCKER_DATA}/data:/home/sftp/upload
      - ./users.conf:/etc/sftp/users.conf:ro

# https://hub.docker.com/r/atmoz/sftp
# hash a password:
# echo -n "your-password" | docker run -i --rm atmoz/makepasswd --crypt-md5 --clearfrom=-